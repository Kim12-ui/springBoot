<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>나의 일정 공유방 리스트</title>

<!-- 부트스트랩 실행 -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
	crossorigin="anonymous"></script>

<!--아이콘-->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<!--부트스트랩 CSS-->
<link th:href="@{/css/styles.css}" rel="stylesheet">
<!--모든 페이지에 전체적으로 적용되는 CSS-->
<link th:href="@{/css/allpage.css}" rel="stylesheet">

<link th:href="@{/css/myinfo/sharingroom_list.css}" rel="stylesheet">

<script th:src="@{/js/jquery-3.7.1.min.js}"></script>
<script th:src="@{/js/myinfo/sharingroom_list.js}"></script>
</head>
<body>
	<header>
		<!--메뉴 nav-->
		<!-- 상단 네비게이션 메뉴 -->
		<nav class="main_nav">
			<!--nav태그 -->
			<a th:href="@{/}"><img th:src="@{/images/로고.png}" alt="로고"></a>
			<div class="nav_container">
				<a href="#" id="scrollToPackage">인기패키지</a> <a href="#"
					id="scrollToTip">여행 팁</a> <a th:href="@{/community/list}">커뮤니티</a>
				<th:block sec:authorize="not isAuthenticated()">
					<a th:href="@{/member/login}">로그인</a>
				</th:block>
				<th:block sec:authorize="isAuthenticated()">
					<div class="dropdown" style="position: relative;">
						<a href="#" class="dropbtn">내 정보보기</a>
						<div class="dropdown-content">
							<a th:href="@{/myinfo/myinfo}">개인정보수정</a> <a
								th:href="@{/myinfo/sharingroom_list}">나의 일정공유방 리스트</a> <a
								th:href="@{/myinfo/community}">커뮤니티 관리</a> <a
								th:href="@{/myinfo/ourtrip}">우리의 여행일지</a> <a
								th:href="@{/member/logout}">로그아웃</a>
						</div>
					</div>
				</th:block>
			</div>
		</nav>

		<!--페이지 이름 + 구분선-->
		<div class="pageName2">
			<h2 th:text="${user.nickname} + '님의 일정공유방 리스트'">리스트</h2>
			<hr width="90%">
		</div>

		<!--검색창-->
		<form action="/search" method="get" class="search-form">
			<div class="search-container">
				<input type="text" id="searchTitle" name="query"
					placeholder="검색어를 입력하세요" required class="search_input">
			</div>
		</form>
		<!--카테고리 검색 -->
		<div class="select-container">
			<div class="form-select-container">
				<select name="continent" id="continentSelect" class="form-select">
					<option value="" selected>대륙</option>
					<option value="asia">아시아</option>
					<option value="europe">유럽</option>
					<option value="northAmerica">북아메리카</option>
					<option value="southAmerica">남아메리카</option>
					<option value="africa">아프리카</option>
					<option value="oceania">오세아니아</option>
				</select> <select name="country" id="countrySelect" class="form-select">
					<option value="" selected>나라</option>
				</select>
			</div>

		</div>
	</header>
	<main>
		<div class="button-div">
			<!-- 왼쪽버튼 2개 -->
			<div>
				<button id="leader-button" class="leader-button mid_button">방장</button>
				<button id="participant-button" class="participant-button mid_button">참가자</button>
			</div>
			<!-- 오른쪽버튼 2개 -->
			<form th:action="@{/sharingroom/sharingroom}" method="get" >
				<button class="mid_button" type="submit" 
				style="background-color : #B5FFAF">방 만들기</button>
			</form>
		</div>
		<div class="leader-list" id="leader-list">
			<table>
				<thead>
					<tr>
						<th>여행기간</th>
						<th style="width: 500px;">방이름</th>
						<th>여행장소</th>
						<th>인원</th>
					</tr>
				</thead>
				<tbody class="leader-tbody" id="leader-tbody"
				th:each="leaderdto : ${leaderDTOList}"
				th:if="${leaderDTOList != null}">
					<tr>
						<td th:each="info : ${leaderdto.sharingroomInfoDTOList}">
							<span
							th:if="${info.planType == 'planA'}"
							th:text="${info.informationDeparture}"
							>
							</span>
							~
							<span
							th:if="${info.planType == 'planA'}"
							th:text="${info.informationReturn}"
							>
							</span>
						</td>
						<td th:text="${leaderdto.sharingroomDTO.roomTitle}"></td>
						<td th:each="info : ${leaderdto.sharingroomInfoDTOList}">
							<span
							th:if="${info.planType == 'planA'}"
							th:text="${info.informationCountry}"
							>
							</span>
						</td>
						<td th:text="${leaderdto.sharingroomParticipantsDTOList.size()}"></td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="participant-list" id="participant-list">
			<table>
				<thead>
					<tr>
						<th>여행기간</th>
						<th style="width: 500px;">방이름</th>
						<th>여행장소</th>
						<th>인원</th>
					</tr>
				</thead>
				<tbody class="participant-tbody" id="participant-tbody"
				th:each="participantDTO : ${participantDTOList}"
				th:if="${participantDTO != null}">
					<tr>
						<td th:each="info : ${participantDTO.sharingroomInfoDTOList}">
							<span
							th:if="${info.planType == 'planA'}"
							th:text="${info.informationDeparture}"
							>
							</span>
							~
							<span
							th:if="${info.planType == 'planA'}"
							th:text="${info.informationReturn}"
							>
							</span>
						</td>
						<td th:text="${participantDTO.sharingroomDTO.roomTitle}"></td>
						<td th:each="info : ${participantDTO.sharingroomInfoDTOList}">
							<span
							th:if="${info.planType == 'planA'}"
							th:text="${info.informationCountry}"
							>
							</span>
						</td>
						<td th:text="${participantDTO.sharingroomParticipantsDTOList.size()}"></td>
					</tr>
				</tbody>
			</table>
		</div>
	</main>
</body>
</html>
